---
layout: post
title: The importance of TDD
subtitle: Javascript Test Framwork, JEST
comments: true
tags: [NodeJS, Express, Jest, axios]
---

상황: 회원가입 혹은 로그인해서 받아온 토큰을 SharedPreference에 저장하고 그 외 요청을 할 때마다 헤더에 실어 보냄 

Dagger의 기본: @Inject, @Provides annotation 쓰는 타입 => semantical encapsulation / Injecting Activities and Fragments(AndroidInjectionModule을 AppComponent에 설치해서 간편한 api로 Component hierarchy를 생성할 수 있었음)

로그인 로직 

1. 로그인 정보를 입력하고 버튼을 클릭
2. LoginActivity SubComponent 내부에 정의된 타입인 LoginContract.Presenter를 require하여 객체를 받아옴 
3. presenter의 login 메소드 호출 => userRepository의 login 메소드 => {userRemoteDataSource의 login 메소드 => userService의 login 메소드 (Retrofit Service를 통해 서버에 POST 요청을 보냄, Retrofit을 빌드하는 과정에서 okHttp 클라이언트에 설정된authentication interceptor를 configure 해줌. 토큰이 비어있으면 그냥 요청 그대로 반환하는 것)} => 성공해서 반환한 UserAuthentication의 토큰과 유저명을 SharedPreference에 저장하고 그대로 UserAuthentication 객체 전달(실제로 뷰에 사용되지는 않음)
4. LoginAcitity의 processLoginSuccess 함수 호출 => HomeActivity로 이동



